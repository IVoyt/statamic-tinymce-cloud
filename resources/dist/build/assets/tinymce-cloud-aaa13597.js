var S=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],b=function(n){return S.map(function(e){return e.toLowerCase()}).indexOf(n.toLowerCase())!==-1},E=function(n,e,t){Object.keys(e).filter(b).forEach(function(r){var i=e[r];typeof i=="function"&&(r==="onInit"?i(n,t):t.on(r.substring(2),function(a){return i(a,t)}))})},w=function(n,e){var t=n.$props.modelEvents?n.$props.modelEvents:null,r=Array.isArray(t)?t.join(" "):t;n.$watch("value",function(i,a){e&&typeof i=="string"&&i!==a&&i!==e.getContent({format:n.$props.outputFormat})&&e.setContent(i)}),e.on(r||"change input undo redo",function(){n.$emit("input",e.getContent({format:n.$props.outputFormat}))})},D=function(n,e,t){var r=e.$props.value?e.$props.value:"",i=e.$props.initialValue?e.$props.initialValue:"";t.setContent(r||(e.initialized?e.cache:i)),e.$listeners.input&&w(e,t),E(n,e.$listeners,t),e.initialized=!0},m=0,C=function(n){var e=Date.now(),t=Math.floor(Math.random()*1e9);return m++,n+"_"+t+m+String(e)},O=function(n){return n!==null&&n.tagName.toLowerCase()==="textarea"},y=function(n){return typeof n>"u"||n===""?[]:Array.isArray(n)?n:n.split(" ")},I=function(n,e){return y(n).concat(y(e))},P=function(n){return n==null},g=function(){return{listeners:[],scriptId:C("tiny-script"),scriptLoaded:!1}},T=function(){var n=g(),e=function(i,a,l,d){var o=a.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=i,o.src=l;var s=function(){o.removeEventListener("load",s),d()};o.addEventListener("load",s),a.head&&a.head.appendChild(o)},t=function(i,a,l){n.scriptLoaded?l():(n.listeners.push(l),i.getElementById(n.scriptId)||e(n.scriptId,i,a,function(){n.listeners.forEach(function(d){return d()}),n.scriptLoaded=!0}))},r=function(){n=g()};return{load:t,reinitialize:r}},M=T(),A=function(){return typeof window<"u"?window:global},p=function(){var n=A();return n&&n.tinymce?n.tinymce:null},R={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return n==="html"||n==="text"}}},f=globalThis&&globalThis.__assign||function(){return f=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},f.apply(this,arguments)},L=function(n,e,t){return n(t||"div",{attrs:{id:e}})},z=function(n,e){return n("textarea",{attrs:{id:e},style:{visibility:"hidden"}})},c=function(n){return function(){var e=f(f({},n.$props.init),{readonly:n.$props.disabled,selector:"#"+n.elementId,plugins:I(n.$props.init&&n.$props.init.plugins,n.$props.plugins),toolbar:n.$props.toolbar||n.$props.init&&n.$props.init.toolbar,inline:n.inlineEditor,setup:function(t){n.editor=t,t.on("init",function(r){return D(r,n,t)}),n.$props.init&&typeof n.$props.init.setup=="function"&&n.$props.init.setup(t)}});O(n.element)&&(n.element.style.visibility=""),p().init(e)}},B={props:R,created:function(){this.elementId=this.$props.id||C("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,p()!==null)c(this)();else if(this.element&&this.element.ownerDocument){var n=this.$props.cloudChannel?this.$props.cloudChannel:"5",e=this.$props.apiKey?this.$props.apiKey:"no-api-key",t=P(this.$props.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+e+"/tinymce/"+n+"/tinymce.min.js":this.$props.tinymceScriptSrc;M.load(this.element.ownerDocument,t,c(this))}},beforeDestroy:function(){p()!==null&&p().remove(this.editor)},deactivated:function(){var n;this.inlineEditor||(this.cache=this.editor.getContent(),(n=p())===null||n===void 0||n.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&c(this)()},render:function(n){return this.inlineEditor?L(n,this.elementId,this.$props.tagName):z(n,this.elementId)}};function F(n,e,t,r,i,a,l,d){var o=typeof n=="function"?n.options:n;e&&(o.render=e,o.staticRenderFns=t,o._compiled=!0),r&&(o.functional=!0),a&&(o._scopeId="data-v-"+a);var s;if(l?(s=function(u){u=u||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!u&&typeof __VUE_SSR_CONTEXT__<"u"&&(u=__VUE_SSR_CONTEXT__),i&&i.call(this,u),u&&u._registeredComponents&&u._registeredComponents.add(l)},o._ssrRegister=s):i&&(s=d?function(){i.call(this,(o.functional?this.parent:this).$root.$options.shadowRoot)}:i),s)if(o.functional){o._injectStyles=s;var $=o.render;o.render=function(_,h){return s.call(h),$(_,h)}}else{var v=o.beforeCreate;o.beforeCreate=v?[].concat(v,s):[s]}return{exports:n,options:o}}const U={mixins:[Fieldtype],components:{editor:B},computed:{apiKey(){return this.meta.key},cloudChannel(){return this.meta.cloud_channel?this.meta.cloud_channel:6},init(){return typeof tinymceCloudConfig>"u"?(alert("The Tiny Cloud config file could not be found. Make sure you have at least one configuration saved."),{}):typeof tinymceCloudConfig[this.meta.init]>"u"?(alert("Your requested Tiny Cloud config could not be found. Please confirm your Blueprint and Tiny Cloud configurations."),{}):tinymceCloudConfig[this.meta.init]}}};var j=function(){var e=this,t=e._self._c;return t("editor",{attrs:{"api-key":e.apiKey,"cloud-channel":e.cloudChannel,init:e.init,value:e.value},on:{input:e.update}})},K=[],V=F(U,j,K,!1,null,null,null,null);const N=V.exports;Statamic.booting(()=>{Statamic.$components.register("tinymce_cloud-fieldtype",N)});
